<div ng-include="'templates/iterations/iterations_box_right.html'" class="text-right box-float-right iterations-box-right"></div>
<div class="box-title">
  <h1 class="title"> {{controller.project.name}}</h1>
  <hr class="underline" />
</div>

<section class="container-new-iteration">
  <div class="subtitle-left">ADD NEW ITERATION</div>
  <div class="box-new-iteration">
    <form class="formIterations" name="formIterations" ng-submit="controller.SaveIteration()">
      <div class="field-form field-iterations float-left">
        <input type="number" name="hours" ng-model="controller.iteration.time" placeholder="Amount of hours" min="0" required/>
        <span ng-show="formIterations.hours.$error.required  && formIterations.hours.$dirty">The amount of hours is required.</span>
      </div>
      <div class="field-form field-iterations float-left margin-right">
        <input type="text" name="start_date" ng-model="controller.iteration.start" placeholder="Start date" ng-pattern="/^(0?[1-9]|[12][0-9]|3[01])\/(0?[1-9]|1[012])\/(199\d|[2-9]\d{3})$/"/ required date-field>
        <span ng-show='formIterations.start_date.$invalid && formIterations.start_date.$dirty'>Your date format is invalid, enter a valid date here : DD/MM/YYYY, please chek it again.</span>
        <div style="clear:both;"></div>
        <span ng-show="formIterations.start_date.$error.required  && formIterations.start_date.$dirty">The start date is required.</span>
      </div>
      <div class="field-form field-iterations float-left">
        <input type="text" name="invoce" ng-model="controller.iteration.invoice" placeholder="Invoce #"/>
      </div>
      <div class="field-button-iterations">
        <input type="submit" value="SAVE" name="commit" class="btn-primary" ng-class="{ disabled: formIterations.$invalid}"/>
      </div>
  </form>
  </div>
</section>
<hr class="underline-division">
<section class="show-iterations">
  <article ng-repeat="iteration in controller.iterations" class="iteration">
    <img class="image-icon-iteration float-left" src="images/calendar.png"/>
    <div class="range-iteration float-left">{{ iteration.date_start }}</div>
    <div class="inv-iteration float-left">Inv#{{ iteration.invoice }}</div>
    <div class="hours-iteration float-right">{{ iteration.hours }}</div>
    <div class="number-iteration float-left">10</div>
    <img class="arrow-iteration float-right" src="images/arrow-green.png"/>
    <a class="link-show-iteration float-right" href="#/iterations/entries/{{controller.project.id}}">VIEW TIME ENTRIES</a>
  </article>
</section>